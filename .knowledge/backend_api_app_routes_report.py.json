{"is_source_file": true, "format": "Python", "description": "This file defines API routes related to report generation and user session history, including schemas for data serialization, authentication checks, and route handlers for retrieving aggregated feedback scores and user interview session history.", "external_files": ["flask_smorest", "flask.views", "marshmallow", "flask", "../db"], "external_methods": ["flask_smorest.Blueprint", "flask_smorest.abort", "flask.views.MethodView", "marshmallow.Schema", "marshmallow.fields", "flask.g", "../db.query_one", "../db.query_all"], "published": ["blp"], "classes": [{"name": "SessionReportSchema", "description": "Schema defining the structure for session report data including session ID and various average scores."}, {"name": "HistoryItemSchema", "description": "Schema representing a single history item with session details and optional role, status, and creation time."}, {"name": "HistoryListSchema", "description": "Schema wrapping a list of history items."}, {"name": "SessionReport", "description": "API endpoint class for fetching aggregated feedback scores for a specific session."}, {"name": "MyHistory", "description": "API endpoint class for fetching the current user's interview session history with scores."}], "methods": [{"name": "_require_user()", "description": "Function to ensure that a user is authenticated; aborts request with 401 if not authenticated.", "scope": "", "scopeKind": ""}, {"name": "get(self)", "description": "Handler method for retrieving session feedback aggregates for /session/<session_id> route.", "scope": "MyHistory", "scopeKind": "class"}, {"name": "get(self, session_id: int)", "description": "Handler method for retrieving the user's session history for /my route.", "scope": "SessionReport", "scopeKind": "class"}], "calls": ["query_one", "query_all"], "search-terms": ["session scores aggregation", "user interview session history", "feedback database query", "session route", "user session history API"], "state": 2, "file_id": 15, "knowledge_revision": 67, "git_revision": "836481a01538a713d597b495cce5e6fc13cf4bbc", "revision_history": [{"32": ""}, {"67": "836481a01538a713d597b495cce5e6fc13cf4bbc"}], "ctags": [{"_type": "tag", "name": "HistoryItemSchema", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^class HistoryItemSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "HistoryListSchema", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^class HistoryListSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MyHistory", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^class MyHistory(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionReport", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^class SessionReport(MethodView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SessionReportSchema", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^class SessionReportSchema(Schema):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_require_user", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^def _require_user():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "avg_communication", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    avg_communication = fields.Float(required=True)$/", "language": "Python", "kind": "variable", "scope": "SessionReportSchema", "scopeKind": "class"}, {"_type": "tag", "name": "avg_completeness", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    avg_completeness = fields.Float(required=True)$/", "language": "Python", "kind": "variable", "scope": "SessionReportSchema", "scopeKind": "class"}, {"_type": "tag", "name": "avg_correctness", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    avg_correctness = fields.Float(required=True)$/", "language": "Python", "kind": "variable", "scope": "SessionReportSchema", "scopeKind": "class"}, {"_type": "tag", "name": "avg_overall", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    avg_overall = fields.Float(required=False)$/", "language": "Python", "kind": "variable", "scope": "HistoryItemSchema", "scopeKind": "class"}, {"_type": "tag", "name": "avg_overall", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    avg_overall = fields.Float(required=True)$/", "language": "Python", "kind": "variable", "scope": "SessionReportSchema", "scopeKind": "class"}, {"_type": "tag", "name": "blp", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^blp = Blueprint(\"Report\", \"report\", url_prefix=\"\\/report\", description=\"Reports and history\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "count", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    count = fields.Integer(required=True)$/", "language": "Python", "kind": "variable", "scope": "SessionReportSchema", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    created_at = fields.DateTime(required=False)$/", "language": "Python", "kind": "variable", "scope": "HistoryItemSchema", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    def get(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "MyHistory", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    def get(self, session_id: int):$/", "language": "Python", "kind": "member", "signature": "(self, session_id: int)", "scope": "SessionReport", "scopeKind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    items = fields.List(fields.Nested(HistoryItemSchema))$/", "language": "Python", "kind": "variable", "scope": "HistoryListSchema", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    role = fields.String(required=False)$/", "language": "Python", "kind": "variable", "scope": "HistoryItemSchema", "scopeKind": "class"}, {"_type": "tag", "name": "session_id", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    session_id = fields.Integer(required=True)$/", "language": "Python", "kind": "variable", "scope": "HistoryItemSchema", "scopeKind": "class"}, {"_type": "tag", "name": "session_id", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    session_id = fields.Integer(required=True)$/", "language": "Python", "kind": "variable", "scope": "SessionReportSchema", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/routes/report.py", "pattern": "/^    status = fields.String(required=False)$/", "language": "Python", "kind": "variable", "scope": "HistoryItemSchema", "scopeKind": "class"}], "hash": "0b43ab7bdab599ff7eb2abd84e5abb68", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/app/routes/report.py", "fields": [{"name": "avg_communication = fields.Float(required=True)", "scope": "SessionReportSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "avg_completeness = fields.Float(required=True)", "scope": "SessionReportSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "avg_correctness = fields.Float(required=True)", "scope": "SessionReportSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "avg_overall = fields.Float(required=False)", "scope": "HistoryItemSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "avg_overall = fields.Float(required=True)", "scope": "SessionReportSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "blp = Blueprint(\"Report\", \"report\", url_prefix=\"\\/report\", description=\"Reports and history\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "count = fields.Integer(required=True)", "scope": "SessionReportSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = fields.DateTime(required=False)", "scope": "HistoryItemSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "items = fields.List(fields.Nested(HistoryItemSchema))", "scope": "HistoryListSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "role = fields.String(required=False)", "scope": "HistoryItemSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "session_id = fields.Integer(required=True)", "scope": "HistoryItemSchema", "scopeKind": "class", "description": "unavailable"}, {"name": "status = fields.String(required=False)", "scope": "HistoryItemSchema", "scopeKind": "class", "description": "unavailable"}]}