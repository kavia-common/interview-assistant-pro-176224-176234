{"is_source_file": true, "format": "Python", "description": "This file provides database connection management and query execution functions for interfacing with a MySQL database using pymysql. It includes connection pooling, query execution, and connection release logic, designed to facilitate database interactions within a larger application.", "external_files": ["pymysql", "pymysql.cursors"], "external_methods": ["pymysql.connect"], "published": ["query_one", "query_all", "execute"], "classes": [], "methods": [{"name": "init_db_pool(host: str, port: int, user: str, password: str, db: str, min_conn: int = 1, max_conn: int = 5)", "description": "Initializes a global database connection pool with specified parameters, ensuring thread-safety with a lock.", "scope": "", "scopeKind": ""}, {"name": "_new_conn()", "description": "Creates a new database connection using stored pool parameters.", "scope": "", "scopeKind": ""}, {"name": "get_conn()", "description": "Provides a database connection, respecting the maximum active connections limit for simplistic pooling.", "scope": "", "scopeKind": ""}, {"name": "release_conn(conn)", "description": "Closes a given database connection and updates the active connection count.", "scope": "", "scopeKind": ""}, {"name": "close_db_pool()", "description": "Designed as a placeholder; no persistent connections to close since connections are closed after use.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict] query_one(sql: str, params: Tuple = ())", "description": "Executes a SQL query expected to return a single row; manages connection lifecycle internally.", "scope": "", "scopeKind": ""}, {"name": "List[Dict] query_all(sql: str, params: Tuple = ())", "description": "Executes a SQL query expected to return multiple rows; manages connection lifecycle internally.", "scope": "", "scopeKind": ""}, {"name": "int execute(sql: str, params: Tuple = ())", "description": "Performs an update/insert/delete SQL command and returns the last inserted row id or affected row count.", "scope": "", "scopeKind": ""}], "calls": ["pymysql.connect", "conn.cursor", "cur.execute", "conn.commit", "conn.rollback", "conn.close", "release_conn"], "search-terms": ["database connection pool", "pymysql", "MySQL", "SQL execution", "connection management"], "state": 2, "file_id": 8, "knowledge_revision": 18, "git_revision": "", "ctags": [{"_type": "tag", "name": "_new_conn", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def _new_conn():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_pool", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^_pool: Dict[str, Any] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable"}, {"_type": "tag", "name": "_pool_lock", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^_pool_lock = threading.Lock()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "close_db_pool", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def close_db_pool():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "execute", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def execute(sql: str, params: Tuple = ()) -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "(sql: str, params: Tuple = ())"}, {"_type": "tag", "name": "get_conn", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def get_conn():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_db_pool", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def init_db_pool(host: str, port: int, user: str, password: str, db: str, min_conn: int = 1, max/", "language": "Python", "kind": "function", "signature": "(host: str, port: int, user: str, password: str, db: str, min_conn: int = 1, max_conn: int = 5)"}, {"_type": "tag", "name": "query_all", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def query_all(sql: str, params: Tuple = ()) -> List[Dict]:$/", "language": "Python", "typeref": "typename:List[Dict]", "kind": "function", "signature": "(sql: str, params: Tuple = ())"}, {"_type": "tag", "name": "query_one", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def query_one(sql: str, params: Tuple = ()) -> Optional[Dict]:$/", "language": "Python", "typeref": "typename:Optional[Dict]", "kind": "function", "signature": "(sql: str, params: Tuple = ())"}, {"_type": "tag", "name": "release_conn", "path": "/home/kavia/workspace/code-generation/interview-assistant-pro-176224-176234/backend_api/app/db.py", "pattern": "/^def release_conn(conn):$/", "language": "Python", "kind": "function", "signature": "(conn)"}], "hash": "47aa86f296718e06ef406d9ab250f928", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/app/db.py", "fields": [{"name": "Dict[str, Any] _pool", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_pool_lock = threading.Lock()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"18": ""}]}